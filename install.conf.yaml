- defaults:
    clean:
      recursive: true # must turn off in ~/
    link:
      create: true
      # relink: true # if this repo is moved, uncomment and install to relink dotfiles
    shell:
      stdout: true
      stderr: true

- create:
    ~/.ssh:
      mode: 0700

- clean:
    ~/:
      recursive: false
# recursive paths
- clean:
    - "~/.config"
    - "~/.ssh"
    - "~/.oh-my-zsh/custom"

- link:
    ~/.dotfiles: "" # link itself

    ~/.zshrc: zsh/zshrc
    ~/.oh-my-zsh: zsh/oh-my-zsh
    ~/.oh-my-zsh/custom/plugins/:
      path: zsh/plugins/*
      glob: true

    # TODO
    # ~/.config:
    # ~/.gitconfig:
    # ~/.vim

    ~/.ssh/config: ssh/config

    ~/.config/clash/Country.mmdb: clash/Country.mmdb

- shell:
    - git submodule sync --recursive
    - git submodule update --init --recursive
